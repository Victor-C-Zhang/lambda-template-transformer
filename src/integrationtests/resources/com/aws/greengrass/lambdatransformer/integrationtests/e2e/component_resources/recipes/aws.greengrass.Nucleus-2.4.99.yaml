---
RecipeFormatVersion: '2020-01-25'
ComponentName: aws.greengrass.Nucleus
ComponentVersion: 2.4.99
ComponentType: aws.greengrass.nucleus
ComponentDescription: Core functionality for device side orchestration of deployments
  and lifecycle management for execution of Greengrass components and applications.
  This includes features such as starting, stopping, and monitoring execution of components
  and apps, interprocess communication server for communication between components,
  component installation and configuration management.
ComponentPublisher: AWS
ComponentConfiguration:
  DefaultConfiguration:
    iotRoleAlias: ''
    awsRegion: ''
    networkProxy: {}
    componentStoreMaxSizeBytes: '10000000000'
    greengrassDataPlanePort: '8443'
    iotCredEndpoint: ''
    mqtt: {}
    iotDataEndpoint: ''
    runWithDefault: {}
    platformOverride: {}
    deploymentPollingFrequencySeconds: '15'
    jvmOptions: ''
Manifests:
  - Platform:
      os: linux
    Lifecycle:
      bootstrap:
        requiresPrivilege: 'true'
        script: |2-

          set -eu
          KERNEL_ROOT="{kernel:rootPath}"
          UNPACK_DIR="{artifacts:decompressedPath}/aws.greengrass.nucleus"
          rm -r "$KERNEL_ROOT"/alts/current/*
          echo "{configuration:/jvmOptions}" > "$KERNEL_ROOT/alts/current/launch.params"
          ln -sf "$UNPACK_DIR" "$KERNEL_ROOT/alts/current/distro"
          exit 100
    Artifacts:
      - Uri: greengrass:HCyyG8Cx4n8V1C4NFcHgGkRyDUtXi2-UPxTHeIQU11Y=/aws.greengrass.nucleus.zip
        Digest: UrBBax/d/WOwi5AlhC3ZSp2R1oz5V0RwurIUtC7EKfw=
        Algorithm: SHA-256
        Unarchive: ZIP
        Permission:
          Read: ALL
          Execute: ALL
  - Platform:
      os: darwin
    Lifecycle:
      bootstrap:
        requiresPrivilege: 'true'
        script: |2-

          set -eu
          KERNEL_ROOT="{kernel:rootPath}"
          UNPACK_DIR="{artifacts:decompressedPath}/aws.greengrass.nucleus"
          rm -r "$KERNEL_ROOT"/alts/current/*
          echo "{configuration:/jvmOptions}" > "$KERNEL_ROOT/alts/current/launch.params"
          ln -sf "$UNPACK_DIR" "$KERNEL_ROOT/alts/current/distro"
          exit 100
    Artifacts:
      - Uri: greengrass:HCyyG8Cx4n8V1C4NFcHgGkRyDUtXi2-UPxTHeIQU11Y=/aws.greengrass.nucleus.zip
        Digest: UrBBax/d/WOwi5AlhC3ZSp2R1oz5V0RwurIUtC7EKfw=
        Algorithm: SHA-256
        Unarchive: ZIP
        Permission:
          Read: ALL
          Execute: ALL
Lifecycle: {}
